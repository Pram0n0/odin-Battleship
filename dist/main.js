(()=>{"use strict";const t=10;class e{constructor(t){this.length=t,this.beenHit=0}hit(){this.beenHit++}isSunk(){return this.beenHit>=this.length}}class i{constructor(){this.board=Array.from({length:t},(()=>Array(t).fill(null))),this.shipsAlive=0}placeShip(t,e,i,r){if(this.isValidShipPlacement(t,e,i,r)){for(let s=0;s<r.length;s++)"horizontal"===i?this.board[e][t+s]=r:"vertical"===i&&(this.board[e+s][t]=r);return this.shipsAlive++,!0}return!1}isValidShipPlacement(e,i,r,s){for(let n=0;n<s.length;n++){let s=e,o=i;if("horizontal"===r?s+=n:"vertical"===r&&(o+=n),s<0||s>=t||o<0||o>=t||null!==this.board[o][s])return!1}return!0}receiveAttack(t,e){const i=this.board[e][t];i?(i.hit(),i.isSunk()&&this.shipsAlive--,console.log("hit")):(this.board[e][t]="miss",console.log("miss"))}allShipsSunk(){return 0===this.shipsAlive}}class r{constructor(t,e,i){this.player=t,this.board=e,this.enemyBoard=i,this.hitsRecord=[],this.ShipList=[]}isValidAttack(e,i){return 0<=e&&e<t&&0<=i&&i<t&&!this.hitsRecord.some((t=>t[0]===e&&t[1]===i))}attack(t,e){return!!this.isValidAttack(t,e)&&(this.enemyBoard.receiveAttack(t,e),console.log(`attacked ${t},${e}`),this.hitsRecord.push([t,e]),!0)}randomAttack(){const e=Math.floor(Math.random()*t),i=Math.floor(Math.random()*t);this.attack(e,i)}createShips(){this.ShipList=[new e(2),new e(3),new e(3),new e(4),new e(5)]}randomShipPlacement(){this.ShipList.forEach((e=>{let i,r,s;do{i=Math.floor(Math.random()*t),r=Math.floor(Math.random()*t),s=Math.random()<.5?"horizontal":"vertical"}while(!this.board.placeShip(i,r,s,e))}))}}function s(t){if(console.log(`${t.player}'s turn`),"NPC"===t.player)t.randomAttack();else{let e,i,r;do{e=prompt("x: "),i=prompt("y: "),r=prompt("Alignment: ")}while(!t.attack(e,i,r))}return!!function(t){return 0===t.enemyBoard.shipsAlive}(t)&&(console.log(`${t.player} wins!`),!0)}!function(){const{player:t,npc:e}=function(){const t=new i,e=new i,s=new r("Player",t,e);s.createShips(),s.randomShipPlacement();const n=new r("NPC",e,t);return n.createShips(),n.randomShipPlacement(),{player:s,npc:n}}();let n=function(t,e){return 1===Math.ceil(2*Math.random())?t:e}(t,e);console.log(`${n.player}'s starts`);let o=!1;for(;!o;)o=s(n),n=n===t?e:t}()})();